# 项目通用规范

## 通用开发原则
- **可测试性**：编写可测试的代码，组件应保持单一职责，尽量细粒度差分成单个文件
- **DRY 原则**：避免重复代码，提取共用逻辑到单独的函数或类
- **代码简洁**：保持代码简洁明了，遵循 KISS 原则（保持简单直接）
- **命名规范**：使用描述性的变量、函数和类名，反映其用途和含义
- **注释文档**：为复杂逻辑添加注释，编写清晰的文档说明功能和用法
- **风格一致**：遵循项目或语言的官方风格指南和代码约定
- **利用生态**：优先使用成熟的库和工具，避免不必要的自定义实现
- **架构设计**：考虑代码的可维护性、可扩展性和性能需求
- **版本控制**：编写有意义的提交信息，保持逻辑相关的更改在同一提交中
- **异常处理**：正确处理边缘情况和错误，提供有用的错误信息

### 命名规范
- 组件: PascalCase(如: UserProfile)
- 变量、函数、方法: camelCase 使用描述性名称:动词+名词(如:getUserData)，简单操作优先使用箭头函数，用 JSDoc 进行文档注释
- 文件、目录: PascalCase (目录如: ModelManange，文件如:ModelManage.tsx)
  - tsx文件使用 PascalCase 方式命名(如:ChangeLevel.tsx),ts文件使用camelCase方式命名(如:change-level.api.ts)
- 常量、环境变量: UPPERCASE(如:BASE_URL)
- 局部常量: PascalCase(如:UserProfile)

## 通用代码规范
- 每个模块入口页面文件定义为 index.tsx，只负责数据流转和布局，具体业务功能组件拆分成单个文件
- 每个组件只做一件事，复杂页面拆分为多个小组件，避免“大而全”组件
- 新增页面时（列表页+表单弹窗），若没指定具体模块，默认参考 src/page-a 目录结构、设计与实现、代码风格、组件等
- 所有网络交互动作都应有 loading，防止重复操作
- 不能有副作用循环依赖造成死循环
- 不同文件之间不能有循环依赖
- 优先使用自有B端组件库 ant-design@5
- 所有接口数据、props、state、API参数都要有明确的 TypeScript 类型定义，非特殊情况禁止 any
- 组件 props 要有完整类型和注释，避免隐式传参
- 业务中出现多次的表单、弹窗、表格等建议抽成通用组件
- 重要业务流程需有异常处理
- 如非全局状态，禁止添加新的 provider/context
- 引用类型尽量 Schemas.ResourceListItemVO 这种格式
- 组件样式尽量使用 styled-components 实现
- 常量都提取到组件外部，不要在组件内部定义常量
- 每个文件的引用按照 外部依赖(比如：react、antd、axios.ts等) -> 项目绝对路径依赖(比如：@/src/api、@/src/hooks等) -> 相对路径 比如：(./a.tsx) 的顺序组织，每一层都用换行隔开

## 列表页代码规范
- 完成提交请求时结束后应刷新数据
- columns 若未使用到组件内的 state，应该提到组件外部
- 操作列使用 link 类型的 Button，多个操作按钮用 Space 包裹并用 Divider 进行分隔
- 列数比较多的时候（超过 10 列），使用 scroll.x 属性，并设置 scroll.x 为 max-content，同时操作列固定在右侧
- 新建类的操作按钮放在表格右上方

## 表单代码规范
- 使用 Form 的 labelCol 让表单看起来尽可能美观
- 对于表单的实现，控件的 placeholder 应有尽有
- 应考虑字段是否必填
- 如果有表单内字段出现联动，优先使用 getFieldValue 获取被依赖的表单项字段，通过条件渲染来处理联动
- 如果表单内需要默认值，优先使用 Form 的 initialValues 设置默认值
- 如果需要监听字段值更新执行副作用，统一使用 form 的 onValuesChange, 不要使用各表单项的 onChange
- 表单提交尽量使用 form.submit , onFinish 处理校验成功后的逻辑

## 响应语言
- 始终使用中文回复用户
- 每次对话返回内容前面都加上一句话：程序员，您好呀～
- 英文单词和中文间需要加空格

## 本项目规则文件说明
本项目使用以下规则文件：
- index.mdx：通用规范（本文件）
- react.mdx：编程框架使用规范
- typescript.mdx：TypeScript 语言开发规范



